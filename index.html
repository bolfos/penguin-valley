<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>Penguin Farmer</title>

<style>
body{margin:0;font-family:Arial;background:#e6f6ff}
header{
 background:#0288d1;color:white;padding:10px;
 display:flex;justify-content:space-between;
 box-shadow:0 2px 6px rgba(0,0,0,.2)
}
#layout{display:flex;height:calc(100vh - 50px)}
#menu{
 width:220px;background:#e1f5fe;padding:10px;
 box-shadow:2px 0 6px rgba(0,0,0,.1)
}
#menu button{
 width:100%;margin-bottom:6px;padding:10px;
 cursor:pointer;border:none;border-radius:8px;
 background:#4fc3f7;color:white;font-size:15px
}
#menu button:hover{background:#29b6f6}
#content{flex:1;padding:15px}
.hidden{display:none}

#farm{
 display:grid;
 grid-template-columns:repeat(6,70px);
 gap:8px;justify-content:center
}
.tile{
 width:70px;height:70px;
 border-radius:12px;
 display:flex;flex-direction:column;
 align-items:center;justify-content:center;
 cursor:pointer;font-size:22px;
 background:#b3e5fc
}
.free{background:#a5d6a7}
.frozen{background:#cfd8dc}
.timer{font-size:11px}

.card{
 background:white;padding:12px;
 border-radius:12px;
 box-shadow:0 2px 6px rgba(0,0,0,.15);
 margin-bottom:10px
}

.npc{
 font-size:40px;cursor:pointer;
 margin:10px
}

/* dialog */
#dialog{
 position:fixed;inset:0;
 background:rgba(0,0,0,.5);
 display:flex;align-items:center;justify-content:center;
}
#dialogBox{
 background:white;padding:20px;
 border-radius:12px;width:300px;
}
</style>
</head>

<body>

<header>
 <div>ğŸ§ Penguin Farmer</div>
 <div id="stats"></div>
</header>

<div id="layout">
<aside id="menu">
 <button onclick="show('farmView')">ğŸŒ¾ FermÄƒ</button>
 <button onclick="show('mapView')">ğŸ—ºï¸ HartÄƒ</button>
 <button onclick="show('marketView')">ğŸª Market</button>
 <button onclick="show('missionsView')">ğŸ“œ Misiune</button>
</aside>

<main id="content">

<!-- FERMA -->
<div id="farmView">
 <h2>Ferma ta</h2>
 <button onclick="selectCrop('carrot')">ğŸ¥•</button>
 <button onclick="selectCrop('cabbage')">ğŸ¥¬</button>
 <button onclick="selectCrop('flower')">ğŸŒ¼</button>
 <div id="farm"></div>
</div>

<!-- HARTÄ‚ -->
<div id="mapView" class="hidden">
 <h2>HartÄƒ</h2>
 <div class="card">ğŸŒ¾ Ferma â€“ activ</div>
 <div class="card">ğŸ™ï¸ OraÈ™ â€“ activ</div>
 <div class="card">ğŸ”ï¸ Nordul ÃngheÈ›at â€“ ğŸ”’</div>
</div>

<!-- MARKET -->
<div id="marketView" class="hidden">
 <h2>Market</h2>
 <div class="card">
  <div class="npc" onclick="talk('merchant')">ğŸ§</div>
  <p>VÃ¢nzare automatÄƒ la recoltare</p>
  <button onclick="upgradeFarm()">â¬†ï¸ Upgrade fermÄƒ (100)</button>
 </div>
</div>

<!-- MISIUNI -->
<div id="missionsView" class="hidden">
 <h2>Misiune activÄƒ</h2>
 <div id="missionBox" class="card"></div>
 <div class="npc" onclick="talk('bear')">ğŸ»</div>
</div>

</main>
</div>

<!-- DIALOG -->
<div id="dialog" class="hidden">
 <div id="dialogBox">
  <p id="dialogText"></p>
  <button onclick="closeDialog()">OK</button>
 </div>
</div>

<script>
/* ====== SAVE ====== */
function save(){
 localStorage.setItem("pf_save",JSON.stringify({
  money,level,xp,tiles,FREE,penguinPos,missionIndex
 }));
}
function load(){
 const d=JSON.parse(localStorage.getItem("pf_save"));
 if(!d)return;
 money=d.money;level=d.level;xp=d.xp;
 tiles=d.tiles;FREE=d.FREE;
 penguinPos=d.penguinPos;
 missionIndex=d.missionIndex;
}

/* ====== DATE ====== */
const GRID=6;
let money=10,level=1,xp=0;
let selectedCrop="carrot";
let penguinPos=7;
let FREE=[7,8,13,14];
let tiles={};

const crops={
 carrot:{emoji:"ğŸ¥•",time:10000,profit:5,cost:1},
 cabbage:{emoji:"ğŸ¥¬",time:20000,profit:15,cost:3},
 flower:{emoji:"ğŸŒ¼",time:30000,profit:40,cost:5}
};

/* ====== MISIUNI ====== */
const missionChain=[
 {text:"RecolteazÄƒ 3 morcovi",check:()=>harvested>=3,reward:30},
 {text:"Ajungi la 100 bani",check:()=>money>=100,reward:50},
 {text:"Sparge 2 bucÄƒÈ›i de gheaÈ›Äƒ",check:()=>FREE.length>=6,reward:60}
];
let missionIndex=0;
let harvested=0;

/* ====== UI ====== */
function updateUI(){
 document.getElementById("stats").textContent=`ğŸ’° ${money} | â­ ${level}`;
 drawMission();
 save();
}
function show(id){
 ["farmView","mapView","marketView","missionsView"]
 .forEach(v=>document.getElementById(v).classList.add("hidden"));
 document.getElementById(id).classList.remove("hidden");
}

/* ====== FERMA ====== */
const farm=document.getElementById("farm");
function drawFarm(){
 farm.innerHTML="";
 for(let i=0;i<GRID*GRID;i++){
  const t=document.createElement("div");
  t.className="tile";

  if(!FREE.includes(i)){
   t.classList.add("frozen");
   t.textContent="â„ï¸";
   t.onclick=()=>breakIce(i);
   farm.appendChild(t);continue;
  }

  t.classList.add("free");
  const isPeng=i===penguinPos;

  if(!tiles[i]){
   t.textContent=isPeng?"ğŸ§":"";
   t.onclick=()=>plant(i);
  }else{
   const c=crops[tiles[i].type];
   const el=Date.now()-tiles[i].plantedAt;
   const r=Math.max(0,Math.ceil((c.time-el)/1000));
   const ready=el>=c.time;
   t.innerHTML=`<div>${c.emoji}${isPeng?"ğŸ§":""}</div>
                <div class="timer">${ready?"gata":r+"s"}</div>`;
   t.onclick=ready?()=>harvest(i):()=>movePenguin(i);
  }
  farm.appendChild(t);
 }
}

/* ====== ACTIUNI ====== */
function selectCrop(c){selectedCrop=c}
function plant(i){
 const c=crops[selectedCrop];
 if(money<c.cost||tiles[i])return;
 money-=c.cost;
 tiles[i]={type:selectedCrop,plantedAt:Date.now()};
 drawFarm();updateUI();
}
function harvest(i){
 money+=crops[tiles[i].type].profit;
 harvested++;
 delete tiles[i];
 drawFarm();updateUI();
}
function breakIce(i){
 if(money<20)return;
 money-=20;FREE.push(i);
 drawFarm();updateUI();
}
function movePenguin(i){penguinPos=i;drawFarm()}

/* ====== MARKET ====== */
function upgradeFarm(){
 if(money<100)return;
 money-=100;
 FREE.push(FREE.length+10);
 updateUI();drawFarm();
}

/* ====== MISIUNI ====== */
function drawMission(){
 const box=document.getElementById("missionBox");
 if(missionIndex>=missionChain.length){
  box.textContent="ğŸ‰ Toate misiunile terminate!";
  return;
 }
 const m=missionChain[missionIndex];
 if(m.check()){
  money+=m.reward;
  missionIndex++;
  openDialog("Misiune terminatÄƒ! RecompensÄƒ: "+m.reward+" ğŸ’°");
 }
 box.textContent=m.text;
}

/* ====== DIALOG ====== */
function talk(type){
 if(type==="merchant")
  openDialog("Salut! Vinde legume È™i fÄƒ upgrade la fermÄƒ!");
 if(type==="bear")
  openDialog("ğŸ» Ursul polar: AjutÄƒ pinguinii È™i vei fi rÄƒsplÄƒtit!");
}
function openDialog(text){
 document.getElementById("dialogText").textContent=text;
 document.getElementById("dialog").classList.remove("hidden");
}
function closeDialog(){
 document.getElementById("dialog").classList.add("hidden");
}

/* ====== START ====== */
load();
drawFarm();
updateUI();
setInterval(drawFarm,1000);
</script>

</body>
</html>
