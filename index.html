<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>Penguin Farmer</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(#cceeff, #ffffff);
}

#topbar {
  background: #4fc3f7;
  padding: 10px 20px;
  display: flex;
  justify-content: space-between;
  color: white;
  font-size: 18px;
}

#layout {
  display: flex;
  height: calc(100vh - 50px);
}

#sidebar {
  width: 220px;
  background: #e1f5fe;
  padding: 10px;
}

#sidebar button {
  width: 100%;
  margin-bottom: 6px;
  padding: 8px;
  cursor: pointer;
}

#game { flex: 1; padding: 20px; }

#farm {
  display: grid;
  grid-template-columns: repeat(6, 70px);
  gap: 8px;
  justify-content: center;
}

.tile {
  width: 70px;
  height: 70px;
  border-radius: 10px;
  background: #b3e5fc;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 22px;
}

.tile.free { background: #a5d6a7; }
.tile.frozen { background: #cfd8dc; }

.timer {
  font-size: 10px;
  color: #333;
}

.hidden { display: none; }

.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
}

.modal-content {
  background: white;
  padding: 20px;
  border-radius: 10px;
}
</style>
</head>

<body>

<header id="topbar">
  <div>üêß Penguin Farmer</div>
  <div>
    <span id="money">üí∞ 10</span>
    <span id="level">‚≠ê Lv 1</span>
    <span id="zone">üìç Ferma</span>
  </div>
</header>

<div id="layout">

<aside id="sidebar">
  <button onclick="selectCrop('carrot')">ü•ï Morcov</button>
  <button onclick="selectCrop('cabbage')">ü•¨ VarzƒÉ</button>
  <button onclick="selectCrop('flower')">üåº Floare</button>
</aside>

<main id="game">
  <h2>üåæ Ferma ta</h2>
  <div id="farm"></div>
</main>

</div>

<script>
/* === DATE === */
const GRID = 6;
const farm = document.getElementById("farm");
const moneyEl = document.getElementById("money");
const levelEl = document.getElementById("level");

let money = 10;
let level = 1;
let xp = 0;

let FREE_TILES = [7,8,13,14];
let tiles = {};
let penguinPos = 7;
let selectedCrop = "carrot";

const crops = {
  carrot:{emoji:"ü•ï",time:10000,profit:5,cost:1},
  cabbage:{emoji:"ü•¨",time:20000,profit:15,cost:3},
  flower:{emoji:"üåº",time:30000,profit:40,cost:5}
};

/* === UI === */
function updateUI(){
  moneyEl.textContent="üí∞ "+money;
  levelEl.textContent="‚≠ê Lv "+level;
}

/* === FARM === */
function drawFarm(){
  farm.innerHTML="";
  for(let i=0;i<GRID*GRID;i++){
    const t=document.createElement("div");
    t.className="tile";

    if(!FREE_TILES.includes(i)){
      t.classList.add("frozen");
      t.textContent="‚ùÑÔ∏è";
      t.onclick=()=>breakIce(i);
      farm.appendChild(t);
      continue;
    }

    t.classList.add("free");

    const isPenguin = penguinPos === i;

    if(!tiles[i]){
      t.textContent = isPenguin ? "üêß" : "";
      t.onclick = ()=>plant(i);
    } else {
      const c=crops[tiles[i].type];
      const elapsed = Date.now()-tiles[i].plantedAt;
      const remaining = Math.max(0, Math.ceil((c.time-elapsed)/1000));
      const ready = elapsed >= c.time;

      t.innerHTML = `
        <div>${c.emoji}${isPenguin?" üêß":""}</div>
        <div class="timer">${ready?"gata":remaining+"s"}</div>
      `;

      t.onclick = ready ? ()=>harvest(i) : ()=>movePenguin(i);
    }
    farm.appendChild(t);
  }
}

/* === ACTIONS === */
function plant(i){
  const c=crops[selectedCrop];
  if(money<c.cost || tiles[i]) return;
  money-=c.cost;
  tiles[i]={type:selectedCrop,plantedAt:Date.now()};
  updateUI(); drawFarm();
}

function harvest(i){
  const c=crops[tiles[i].type];
  money+=c.profit;
  xp+=5;
  if(xp>=100){xp=0;level++;}
  delete tiles[i];
  updateUI(); drawFarm();
}

function breakIce(i){
  if(money<20) return;
  money-=20;
  FREE_TILES.push(i);
  updateUI(); drawFarm();
}

function movePenguin(i){
  penguinPos=i;
  drawFarm();
}

function selectCrop(c){selectedCrop=c;}

/* === KEYBOARD MOVE === */
document.addEventListener("keydown",e=>{
  const row=Math.floor(penguinPos/GRID);
  const col=penguinPos%GRID;
  let next=penguinPos;

  if(e.key==="ArrowUp"||e.key==="w") next=(row>0)?penguinPos-GRID:penguinPos;
  if(e.key==="ArrowDown"||e.key==="s") next=(row<GRID-1)?penguinPos+GRID:penguinPos;
  if(e.key==="ArrowLeft"||e.key==="a") next=(col>0)?penguinPos-1:penguinPos;
  if(e.key==="ArrowRight"||e.key==="d") next=(col<GRID-1)?penguinPos+1:penguinPos;

  if(FREE_TILES.includes(next)) penguinPos=next;
  drawFarm();
});

/* === START === */
updateUI();
drawFarm();
setInterval(drawFarm,1000);
</script>

</body>
</html>
