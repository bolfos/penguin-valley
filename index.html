<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>Penguin Farmer</title>

<style>
body{margin:0;font-family:Arial;background:#e6f6ff}
header{
  background:#4fc3f7;color:white;padding:10px;
  display:flex;justify-content:space-between
}
#layout{display:flex;height:calc(100vh - 50px)}
#menu{width:200px;background:#d9f1ff;padding:10px}
#menu button{width:100%;margin-bottom:6px;padding:8px;cursor:pointer}
#content{flex:1;padding:15px}
.hidden{display:none}

#farm{
 display:grid;
 grid-template-columns:repeat(6,70px);
 gap:8px;
 justify-content:center
}
.tile{
 width:70px;height:70px;
 border-radius:10px;
 display:flex;
 flex-direction:column;
 align-items:center;
 justify-content:center;
 cursor:pointer;
 background:#b3e5fc
}
.free{background:#a5d6a7}
.frozen{background:#cfd8dc}
.timer{font-size:11px}
</style>
</head>

<body>

<header>
 <div>ğŸ§ Penguin Farmer</div>
 <div id="stats"></div>
</header>

<div id="layout">
 <aside id="menu">
  <button onclick="show('farmView')">ğŸŒ¾ FermÄƒ</button>
  <button onclick="show('cityView')">ğŸ™ï¸ OraÈ™</button>
  <button onclick="show('missionsView')">ğŸ“œ Misiuni</button>
 </aside>

 <main id="content">

  <div id="farmView">
   <h2>Ferma ta</h2>
   <button onclick="selectCrop('carrot')">ğŸ¥•</button>
   <button onclick="selectCrop('cabbage')">ğŸ¥¬</button>
   <button onclick="selectCrop('flower')">ğŸŒ¼</button>
   <div id="farm"></div>
  </div>

  <div id="cityView" class="hidden">
   <h2>OraÈ™</h2>
   <button onclick="buyDog()">ğŸ• CÃ¢ine (50)</button>
   <button onclick="buySnowmobile()">ğŸ›· Snowmobile (100)</button>
   <p id="cityInfo"></p>
  </div>

  <div id="missionsView" class="hidden">
   <h2>Misiuni</h2>
   <ul id="missions"></ul>
  </div>

 </main>
</div>

<script>
/* ====== SAVE / LOAD ====== */
function save(){
 localStorage.setItem("pf_save",JSON.stringify({
  money,level,xp,tiles,FREE,penguinPos,
  dogs,vehicle,missions
 }));
}
function load(){
 const d=JSON.parse(localStorage.getItem("pf_save"));
 if(!d)return;
 money=d.money;level=d.level;xp=d.xp;
 tiles=d.tiles;FREE=d.FREE;penguinPos=d.penguinPos;
 dogs=d.dogs;vehicle=d.vehicle;missions=d.missions;
}

/* ====== DATE ====== */
const GRID=6;
let money=10,level=1,xp=0;
let selectedCrop="carrot";
let penguinPos=7;
let FREE=[7,8,13,14];
let tiles={};
let dogs=0,vehicle="sled";

const crops={
 carrot:{emoji:"ğŸ¥•",time:10000,profit:5,cost:1},
 cabbage:{emoji:"ğŸ¥¬",time:20000,profit:15,cost:3},
 flower:{emoji:"ğŸŒ¼",time:30000,profit:40,cost:5}
};

let missions=[
 {text:"RecolteazÄƒ 3 morcovi",done:false,check:()=>count("carrot")>=3,reward:20},
 {text:"Ajungi la 50 bani",done:false,check:()=>money>=50,reward:30}
];

/* ====== UI ====== */
function updateUI(){
 document.getElementById("stats").textContent=
  `ğŸ’° ${money} | â­ ${level}`;
 document.getElementById("cityInfo").textContent=
  `ğŸ• ${dogs} | ğŸ›· ${vehicle}`;
 renderMissions();
 save();
}
function show(id){
 ["farmView","cityView","missionsView"].forEach(v=>{
  document.getElementById(v).classList.add("hidden");
 });
 document.getElementById(id).classList.remove("hidden");
}

/* ====== FERMA ====== */
const farm=document.getElementById("farm");
function drawFarm(){
 farm.innerHTML="";
 for(let i=0;i<GRID*GRID;i++){
  const t=document.createElement("div");
  t.className="tile";

  if(!FREE.includes(i)){
   t.classList.add("frozen");
   t.textContent="â„ï¸";
   t.onclick=()=>breakIce(i);
   farm.appendChild(t);continue;
  }

  t.classList.add("free");
  const isPeng=i===penguinPos;

  if(!tiles[i]){
   t.textContent=isPeng?"ğŸ§":"";
   t.onclick=()=>plant(i);
  }else{
   const c=crops[tiles[i].type];
   const el=Date.now()-tiles[i].plantedAt;
   const r=Math.max(0,Math.ceil((c.time-el)/1000));
   const ready=el>=c.time;
   t.innerHTML=`<div>${c.emoji}${isPeng?"ğŸ§":""}</div>
                <div class="timer">${ready?"gata":r+"s"}</div>`;
   t.onclick=ready?()=>harvest(i):()=>movePenguin(i);
  }
  farm.appendChild(t);
 }
}

/* ====== ACÈšIUNI ====== */
function selectCrop(c){selectedCrop=c}
function plant(i){
 const c=crops[selectedCrop];
 if(money<c.cost||tiles[i])return;
 money-=c.cost;
 tiles[i]={type:selectedCrop,plantedAt:Date.now()};
 drawFarm();updateUI();
}
function harvest(i){
 const c=crops[tiles[i].type];
 money+=c.profit;xp+=10;
 if(xp>=100){xp=0;level++}
 delete tiles[i];
 drawFarm();updateUI();
}
function breakIce(i){
 if(money<20)return;
 money-=20;FREE.push(i);
 drawFarm();updateUI();
}
function movePenguin(i){penguinPos=i;drawFarm()}

/* ====== ORAÈ˜ ====== */
function buyDog(){
 if(money<50)return;
 money-=50;dogs++;updateUI();
}
function buySnowmobile(){
 if(money<100)return;
 money-=100;vehicle="snowmobile";updateUI();
}

/* ====== MISIUNI ====== */
function count(type){
 return Object.values(tiles).filter(t=>t.type===type).length;
}
function renderMissions(){
 const ul=document.getElementById("missions");
 ul.innerHTML="";
 missions.forEach(m=>{
  if(!m.done && m.check()){
   m.done=true;
   money+=m.reward;
  }
  const li=document.createElement("li");
  li.textContent=m.text+(m.done?" âœ…":"");
  ul.appendChild(li);
 });
}

/* ====== START ====== */
load();
drawFarm();
updateUI();
setInterval(drawFarm,1000);
</script>

</body>
</html>
