<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>Penguin Farmer</title>

<style>
body{margin:0;font-family:Arial;background:#e6f6ff}
.hidden{display:none}
button{cursor:pointer}
#msg{position:fixed;bottom:10px;left:50%;transform:translateX(-50%);
background:#333;color:#fff;padding:8px 14px;border-radius:8px;opacity:.9}

/* LOGIN */
#login{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
background:linear-gradient(#81d4fa,#e6f6ff)}
#loginBox{background:white;padding:20px;border-radius:12px;width:300px}
#loginBox input{width:100%;margin-bottom:10px;padding:8px}

/* LAYOUT */
header{background:#0288d1;color:white;padding:10px;display:flex;justify-content:space-between}
#layout{display:flex;height:calc(100vh - 50px)}
#menu{width:220px;background:#e1f5fe;padding:10px}
#menu button{width:100%;margin-bottom:6px;padding:10px;border:none;border-radius:8px;
background:#4fc3f7;color:white}
#content{flex:1;padding:15px}

/* FARM */
#farm{display:grid;grid-template-columns:repeat(6,70px);gap:8px;justify-content:center}
.tile{width:70px;height:70px;border-radius:12px;display:flex;flex-direction:column;
align-items:center;justify-content:center;font-size:22px;background:#b3e5fc}
.free{background:#a5d6a7}
.frozen{background:#cfd8dc}
.timer{font-size:11px}
</style>
</head>

<body>

<div id="login">
 <div id="loginBox">
  <h3>ğŸ§ Penguin Farmer</h3>
  <input id="email" placeholder="Email">
  <input id="pass" type="password" placeholder="ParolÄƒ">
  <button onclick="auth()">IntrÄƒ / CreeazÄƒ cont</button>
 </div>
</div>

<div id="game" class="hidden">
<header>
 <div>ğŸ§ Penguin Farmer</div>
 <div id="stats"></div>
</header>

<div id="layout">
<aside id="menu">
 <button onclick="show('farmView')">ğŸŒ¾ FermÄƒ</button>
 <button onclick="show('mapView')">ğŸ—ºï¸ HartÄƒ</button>
 <button onclick="show('marketView')">ğŸª Market</button>
 <button onclick="show('missionsView')">ğŸ“œ Misiune</button>
</aside>

<main id="content">
<div id="farmView">
 <h2>Ferma ta</h2>
 <button onclick="selectCrop('carrot')">ğŸ¥•</button>
 <button onclick="selectCrop('cabbage')">ğŸ¥¬</button>
 <button onclick="selectCrop('flower')">ğŸŒ¼</button>
 <div id="farm"></div>
</div>

<div id="mapView" class="hidden"><h2>HartÄƒ</h2><p>Zone viitoare ğŸ”’</p></div>
<div id="marketView" class="hidden">
 <h2>Market</h2>
 <button onclick="upgradeFarm()">â¬†ï¸ Upgrade fermÄƒ (100)</button>
</div>

<div id="missionsView" class="hidden">
 <h2>Misiune</h2>
 <div id="mission"></div>
</div>
</main>
</div>
</div>

<div id="msg" class="hidden"></div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
/* ğŸ”¥ FIREBASE CONFIG â€“ ÃNLOCUIEÈ˜TI CU AL TÄ‚U */
firebase.initializeApp({
 apiKey: "API_KEY",
 authDomain: "PROJECT.firebaseapp.com",
 projectId: "PROJECT"
});

const authF=firebase.auth();
const db=firebase.firestore();

/* UTIL */
function msg(t){
 const m=document.getElementById("msg");
 m.textContent=t;m.classList.remove("hidden");
 setTimeout(()=>m.classList.add("hidden"),2000);
}

/* AUTH */
function auth(){
 const e=email.value,p=pass.value;
 authF.signInWithEmailAndPassword(e,p)
 .catch(()=>authF.createUserWithEmailAndPassword(e,p));
}
authF.onAuthStateChanged(u=>{
 if(!u)return;
 user=u.uid;
 login.classList.add("hidden");
 game.classList.remove("hidden");
 load();start();
});

/* GAME DATA */
let user,money=10,tiles={},FREE=[7,8,13,14],selectedCrop="carrot";
const crops={carrot:{emoji:"ğŸ¥•",time:8000,profit:5,cost:1},
cabbage:{emoji:"ğŸ¥¬",time:15000,profit:15,cost:3},
flower:{emoji:"ğŸŒ¼",time:25000,profit:40,cost:5}};

/* SAVE / LOAD */
function save(){db.collection("users").doc(user).set({money,tiles,FREE})}
function load(){
 db.collection("users").doc(user).get().then(d=>{
  if(!d.exists)return;
  money=d.data().money;tiles=d.data().tiles;FREE=d.data().FREE;
 });
}

/* UI */
function update(){stats.textContent=`ğŸ’° ${money}`;save()}
function show(id){
 ["farmView","mapView","marketView","missionsView"]
 .forEach(v=>document.getElementById(v).classList.add("hidden"));
 document.getElementById(id).classList.remove("hidden");
}

/* FARM */
function draw(){
 farm.innerHTML="";
 for(let i=0;i<36;i++){
  let t=document.createElement("div");
  t.className="tile";
  if(!FREE.includes(i)){
   t.classList.add("frozen");t.textContent="â„ï¸";
   t.onclick=()=>{if(money<20)msg("Nu ai destui bani");else{money-=20;FREE.push(i);update();draw();}};
  }else if(!tiles[i]){
   t.classList.add("free");t.onclick=()=>plant(i);
  }else{
   const c=crops[tiles[i].t];
   const r=c.time-(Date.now()-tiles[i].d);
   t.innerHTML=`${c.emoji}<div class="timer">${r<=0?"gata":Math.ceil(r/1000)+"s"}</div>`;
   if(r<=0)t.onclick=()=>harvest(i);
  }
  farm.appendChild(t);
 }
}

/* ACTIONS */
function selectCrop(c){selectedCrop=c}
function plant(i){
 const c=crops[selectedCrop];
 if(money<c.cost)return msg("Bani insuficienÈ›i");
 money-=c.cost;tiles[i]={t:selectedCrop,d:Date.now()};
 update();draw();
}
function harvest(i){
 money+=crops[tiles[i].t].profit;
 delete tiles[i];update();draw();
}
function upgradeFarm(){
 if(money<100)return msg("Bani insuficienÈ›i");
 money-=100;FREE.push(FREE.length+10);update();draw();
}

/* START */
function start(){draw();update();setInterval(draw,1000)}
</script>
</body>
</html>
